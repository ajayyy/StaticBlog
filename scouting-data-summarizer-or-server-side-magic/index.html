<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.25.7"/><meta name="theme-color" content="#fff"/><style data-href="/styles.98c208488f7e0918f3b4.css" data-identity="gatsby-global-css">body{margin:8px}.profilepic{border-radius:50%;height:80px;overflow:hidden}#title,.profilepic{vertical-align:middle}#title{background-color:#636363;color:#212121;font-family:sans-serif;font-size:50px;padding:20px;text-align:center;transition:font-size 1s}#title,.title-text{text-decoration:none}.title-text:hover{color:#212121}body{background-color:#333;color:#c4c4c4;font-family:sans-serif;font-size:1.1rem;line-height:1.5}code{font-size:12pt!important}a{color:inherit;transition:color .1s linear}a:hover{color:#fff}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}pre[class*=language-].line-numbers{counter-reset:linenumber;padding-left:3.8em;position:relative}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{border-right:1px solid #999;font-size:100%;left:-3.8em;letter-spacing:-1px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block}.line-numbers-rows>span:before{color:#999;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}.blog-post-content{margin:auto;max-width:60%;text-align:left}@media screen and (orientation:portrait){.blog-post-content{max-width:100%}}.blog-post-content img{max-width:100%}.blog-post-container{text-align:center}.gatsby-highlight pre[class*=language-].line-numbers{overflow:initial;padding:0 0 0 2.8em}</style><link rel="icon" href="/favicon-32x32.png?v=a60a5f8134c1a0a70ea7cd9216912b32" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="alternate" type="application/rss+xml" title="Ajay Ramachandran&#x27;s Blog" href="/rss.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div id="title"><img src="/ajay_profile.jpg" class="profilepic"/> <a class="title-text" href="/">Ajay Ramachandran</a></div><main><div class="blog-post-container"><div class="blog-post"><h1>Scouting Data Summarizer | Server-Side Magic</h1><h2>April 17, 2019</h2><div class="blog-post-content"><h4>Repository</h4>
<p><a href="https://github.com/ajayyy/LakeEffectScoutingSummary/">https://github.com/ajayyy/LakeEffectScoutingSummary/</a></p>
<blockquote>
<h3>What is this</h3>
<p>This is a reader for the scouting app developed for FIRST Robotics Team 2708. It is used to scout other robots at the competition. The data is sent from 6 client apps to the server over bluetooth throughout the course of the events. The server must manage and put everything together. Scouting is necessary to be able to change your team's strategy and know what teams to pick to join your alliance. This reader converts the complicated database information into something easily understandable.</p>
<h3>About this year's game</h3>
<p>In this years game, teams must score "cargo" into holes in rockets. If the cargo is put in without a hatch panel, then it will fall out. The hatch panels must be fastened on to the rockets and cargo ship to prevent the cargo from falling out.
<img src="https://files.steempeak.com/file/steempeak/ajayyy/Kfvwvueh-image.png" alt="image.png"></p>
</blockquote>
<h1>Added more statistics</h1>
<p>I added a calculated robot death rate (when the robot gets disconnect or shutdown due to some issue).</p>
<p>Added a calculated defense, tipped, and climb success/fail rate for level 1 climb and level 2 climb.</p>
<p>The climb rate is has to take into account the column next to it as well, since it could be a successful climb or a failed climb.</p>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token comment">//find the amount of times a certain string has been saved in a column in a percentage</span>
<span class="token comment">//Ex. number of successful level 2 climb</span>
<span class="token comment">//only if the first search term AND the second are true (in the current column and the next column)</span>
<span class="token comment">//Ex. First column: "level 2", second column: "success"</span>
function <span class="token function">getColumnTextItems</span><span class="token punctuation">(</span>currentRobotNumber<span class="token punctuation">,</span> labels<span class="token punctuation">,</span> robots<span class="token punctuation">,</span> collumnTerm<span class="token punctuation">,</span> rowSearch<span class="token punctuation">,</span> nextColumnSearch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">//find average of this column</span>
    let column <span class="token operator">=</span> <span class="token function">getColumnIndex</span><span class="token punctuation">(</span>labels<span class="token punctuation">,</span> collumnTerm<span class="token punctuation">)</span><span class="token punctuation">;</span>
    let items <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">for</span> <span class="token punctuation">(</span>let currentRobot <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> currentRobot <span class="token operator">&lt;</span> robots<span class="token punctuation">.</span>length<span class="token punctuation">;</span> currentRobot<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>robots<span class="token punctuation">[</span>currentRobot<span class="token punctuation">]</span><span class="token punctuation">.</span>robotNumber <span class="token operator">==</span><span class="token operator">=</span> currentRobotNumber<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token comment">//all the matches for this robot</span>
            <span class="token comment">//starts at 1 to skip the labels</span>
            <span class="token keyword">for</span> <span class="token punctuation">(</span>let matchNum <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> matchNum <span class="token operator">&lt;</span> robots<span class="token punctuation">[</span>currentRobot<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>length<span class="token punctuation">;</span> matchNum<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                <span class="token comment">//otherwise it's just a line break at the end of the file</span>
                <span class="token keyword">if</span> <span class="token punctuation">(</span>robots<span class="token punctuation">[</span>currentRobot<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>matchNum<span class="token punctuation">]</span><span class="token punctuation">.</span>length <span class="token operator">></span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
                    <span class="token keyword">if</span> <span class="token punctuation">(</span>robots<span class="token punctuation">[</span>currentRobot<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>matchNum<span class="token punctuation">]</span><span class="token punctuation">[</span>column<span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span><span class="token operator">=</span> rowSearch <span class="token operator">&amp;&amp;</span>
                        robots<span class="token punctuation">[</span>currentRobot<span class="token punctuation">]</span><span class="token punctuation">.</span>data<span class="token punctuation">[</span>matchNum<span class="token punctuation">]</span><span class="token punctuation">[</span>column <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span><span class="token operator">=</span> nextColumnSearch<span class="token punctuation">)</span> <span class="token punctuation">{</span>
                        items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
                        items<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
                    <span class="token punctuation">}</span>
                <span class="token punctuation">}</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">return</span> items<span class="token punctuation">;</span>
<span class="token punctuation">}</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Average ratings were also added.</p>
<p>Starting position, starting platform and the starting object were also added in another section. This information isn't 100% needed, so it is hidden by default, but can be seen by clicking on it.</p>
<h1>Server-side calcluations</h1>
<p>Before, sometimes very simple operations (reading and modifying an array), were taking a very long time. I realized this was because I was running everything on the main thread.</p>
<p>In electron, there is the server-side JavaScript and the JavaScript running in the web browser, the JavaScript running in the web browser is heavily throttled. Now, all the long calculations have been moved to the server-side and the two code bases communicate over ipc.</p>
<p>To send data from the client:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">electron<span class="token punctuation">.</span>ipcRenderer<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"createOverallSummary"</span><span class="token punctuation">,</span> currentRobotNumber<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>To receive the response:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">electron<span class="token punctuation">.</span>ipcRenderer<span class="token punctuation">.</span><span class="token function">on</span><span class="token punctuation">(</span><span class="token string">'showOverallSummary'</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">event<span class="token punctuation">,</span> result</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    document<span class="token punctuation">.</span><span class="token function">getElementById</span><span class="token punctuation">(</span><span class="token string">'overallSummary'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>innerHTML <span class="token operator">=</span> result<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span></span></pre></div>
<p>The server-side code can then callback with:</p>
<div class="gatsby-highlight" data-language="js"><pre style="counter-reset: linenumber NaN" class="language-js line-numbers"><code class="language-js">event<span class="token punctuation">.</span>sender<span class="token punctuation">.</span><span class="token function">send</span><span class="token punctuation">(</span><span class="token string">"showOverallSummary"</span><span class="token punctuation">,</span> result<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span></span></pre></div>
<p>New processing speed:
<img src="/images/fwBATP1S-instant20processing.gif" alt="instant processing.gif"></p>
<p>Old slow speed:
<img src="/images/WtkLMpLw-slow20processing.gif" alt="slow processing.gif"></p>
<h1>Added fractions alongside the percentages</h1>
<p>Now, whenever there is a percentage, it also shows the fraction that made it (because sometimes those can be more understandable). For example, when showing success rate, it will show 80% along with 8/10 (10 total matches).</p>
<p><img src="/images/XKOaJCHh-image.png" alt="image.png"></p>
<h1>Made pressing enter on the textbox load data</h1>
<p>Before you needed to hit load data, this makes it a lot easier to get data quickly</p>
<h1>Made the robot number text box autofocus</h1>
<p>Now, when the program is started, the text box is already focused ready for you to type into it.</p>
<h1>Made all the decimal place numbers look nicer</h1>
<p>They now use <code class="language-text">.toFixed(2)</code> to keep less decimal places and not look unnecessarily long.</p>
<h1>Made the image size more dynamic</h1>
<p>Now it changes based on window size</p>
<h1>Comments display</h1>
<p>The comments in the scouting data are now displayed, along with the match they are from and who made the comment.</p>
<p>The comments in the database always had some placeholder characters such as <code class="language-text">|c</code> and <code class="language-text">|q</code> referring to <code class="language-text">,</code> and <code class="language-text">"</code>. These are finally viewable in the way they should be, as the program now converts them to their proper symbol.</p>
<p>This was put in place to prevent issues when data is transferred in the companion scouting app.</p>
<p><img src="/images/9UIrjWwL-image.png" alt="image.png">
(Names blanked out)</p>
<h1>Improved max performance algorithm</h1>
<p>Instead of just showing the maximum successful object placements, and the maximum amount of failures, it tries to show the maximum performance of the robot.</p>
<p>It looks for the most successes it's every done. If there is more than one match that has the maximum successes, it will look for the minimum failures in those matches. In this way, it finds the best performing matches.</p>
<div class="gatsby-highlight" data-language="java"><pre style="counter-reset: linenumber NaN" class="language-java line-numbers"><code class="language-java"><span class="token comment">//find max</span>
let hitMaxItems <span class="token operator">=</span> <span class="token function">getMaxItems</span><span class="token punctuation">(</span>hitItems<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">//the miss amount in ONLY the matches where the maximum amount of items were places</span>
let maxMissItems <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">for</span> <span class="token punctuation">(</span>let i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> hitMaxItems<span class="token punctuation">.</span>length<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    maxMissItems<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>missItems<span class="token punctuation">[</span>hitMaxItems<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token comment">//it will find the minimum misses in the matches where they scored the most (the best performance)</span>
let missMinItems <span class="token operator">=</span> <span class="token function">getMinItems</span><span class="token punctuation">(</span>maxMissItems<span class="token punctuation">)</span><span class="token punctuation">;</span></code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<h1>Sorted the match data</h1>
<p>Before, the match data was just in the order the data was received, not in the chronological order. This is important when displaying comments.</p>
<h4>Pull Requests</h4>
<p><a href="https://github.com/ajayyy/LakeEffectScoutingSummary/pull/2">https://github.com/ajayyy/LakeEffectScoutingSummary/pull/2</a></p>
<h4>GitHub Account</h4>
<p><a href="https://github.com/ajayyy">https://github.com/ajayyy</a></p></div></div></div></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/scouting-data-summarizer-or-server-side-magic";window.___webpackCompilationHash="ee9f93a22f5d812d53ee";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-2027c615c2b1d449723b.js"],"app":["/app-a8a88917d557b5d5c239.js"],"component---src-pages-404-js":["/component---src-pages-404-js-6e293d823d5e173acc7a.js"],"component---src-pages-index-js":["/component---src-pages-index-js-4c00f30d3c318a368679.js"],"component---src-pages-sponsorblock-js":["/component---src-pages-sponsorblock-js-03e17db57ab08e6d8408.js"],"component---src-pages-vostercoaster-js":["/component---src-pages-vostercoaster-js-dee0d7b7fa6b58872b3e.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js-d0d2c490581e9ed2d6f1.js"]};/*]]>*/</script><script src="/polyfill-2027c615c2b1d449723b.js" nomodule=""></script><script src="/app-a8a88917d557b5d5c239.js" async=""></script><script src="/framework-c0acfd4b44c09a0159f3.js" async=""></script><script src="/webpack-runtime-f415ec79cfe5feaa0178.js" async=""></script></body></html>