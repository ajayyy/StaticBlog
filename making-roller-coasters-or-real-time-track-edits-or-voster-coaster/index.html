<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><meta name="generator" content="Gatsby 4.25.7"/><meta name="theme-color" content="#fff"/><style data-href="/styles.98c208488f7e0918f3b4.css" data-identity="gatsby-global-css">body{margin:8px}.profilepic{border-radius:50%;height:80px;overflow:hidden}#title,.profilepic{vertical-align:middle}#title{background-color:#636363;color:#212121;font-family:sans-serif;font-size:50px;padding:20px;text-align:center;transition:font-size 1s}#title,.title-text{text-decoration:none}.title-text:hover{color:#212121}body{background-color:#333;color:#c4c4c4;font-family:sans-serif;font-size:1.1rem;line-height:1.5}code{font-size:12pt!important}a{color:inherit;transition:color .1s linear}a:hover{color:#fff}code[class*=language-],pre[class*=language-]{word-wrap:normal;background:none;color:#ccc;font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;-webkit-hyphens:none;hyphens:none;line-height:1.5;-o-tab-size:4;tab-size:4;text-align:left;white-space:pre;word-break:normal;word-spacing:normal}pre[class*=language-]{margin:.5em 0;overflow:auto;padding:1em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#2d2d2d}:not(pre)>code[class*=language-]{border-radius:.3em;padding:.1em;white-space:normal}.token.block-comment,.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#999}.token.punctuation{color:#ccc}.token.attr-name,.token.deleted,.token.namespace,.token.tag{color:#e2777a}.token.function-name{color:#6196cc}.token.boolean,.token.function,.token.number{color:#f08d49}.token.class-name,.token.constant,.token.property,.token.symbol{color:#f8c555}.token.atrule,.token.builtin,.token.important,.token.keyword,.token.selector{color:#cc99cd}.token.attr-value,.token.char,.token.regex,.token.string,.token.variable{color:#7ec699}.token.entity,.token.operator,.token.url{color:#67cdcc}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.token.inserted{color:green}pre[class*=language-].line-numbers{counter-reset:linenumber;padding-left:3.8em;position:relative}pre[class*=language-].line-numbers>code{position:relative;white-space:inherit}.line-numbers .line-numbers-rows{border-right:1px solid #999;font-size:100%;left:-3.8em;letter-spacing:-1px;pointer-events:none;position:absolute;top:0;-webkit-user-select:none;user-select:none;width:3em}.line-numbers-rows>span{counter-increment:linenumber;display:block}.line-numbers-rows>span:before{color:#999;content:counter(linenumber);display:block;padding-right:.8em;text-align:right}.blog-post-content{margin:auto;max-width:60%;text-align:left}@media screen and (orientation:portrait){.blog-post-content{max-width:100%}}.blog-post-content img{max-width:100%}.blog-post-container{text-align:center}.gatsby-highlight pre[class*=language-].line-numbers{overflow:initial;padding:0 0 0 2.8em}</style><link rel="icon" href="/favicon-32x32.png?v=a60a5f8134c1a0a70ea7cd9216912b32" type="image/png"/><link rel="manifest" href="/manifest.webmanifest" crossorigin="anonymous"/><link rel="apple-touch-icon" sizes="48x48" href="/icons/icon-48x48.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="apple-touch-icon" sizes="72x72" href="/icons/icon-72x72.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="apple-touch-icon" sizes="96x96" href="/icons/icon-96x96.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="apple-touch-icon" sizes="144x144" href="/icons/icon-144x144.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="apple-touch-icon" sizes="192x192" href="/icons/icon-192x192.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="apple-touch-icon" sizes="256x256" href="/icons/icon-256x256.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="apple-touch-icon" sizes="384x384" href="/icons/icon-384x384.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="apple-touch-icon" sizes="512x512" href="/icons/icon-512x512.png?v=a60a5f8134c1a0a70ea7cd9216912b32"/><link rel="alternate" type="application/rss+xml" title="Ajay Ramachandran&#x27;s Blog" href="/rss.xml"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div id="title"><img src="/ajay_profile.jpg" class="profilepic"/> <a class="title-text" href="/">Ajay Ramachandran</a></div><main><div class="blog-post-container"><div class="blog-post"><h1>Real-Time Track Edits | Building Roller Coasters | Voster Coaster</h1><h2>June 15, 2018</h2><div class="blog-post-content"><h1>Repository</h1>
<p><a href="https://github.com/ajayyy/VosterCoasterVR/">https://github.com/ajayyy/VosterCoasterVR/</a></p>
<h1>What is Voster Coaster?</h1>
<p>Voster Coaster is a VR game where you build roller coasters. I plan on making it a theme park tycoon game in the future as well.</p>
<h1>Made the height of track pieces uniform for turns</h1>
<p>Before, the inside turn would be scaled to the correct height:
<img src="/images/QmeuuCo7wJTEjyNeCryeov4hjzc2uykULPeSsJ6nvVEdes" alt="image.png"></p>
<p>Now, the outside turn is:
<img src="/images/QmRp48ztumVnzZcP8U75EGdCccxGnyxhm6Mu8Bbw8DXYjg" alt="image.png"></p>
<p>This is much more useful, as it makes the total height uniform, and will help when combining turn pieces with normal pieces.</p>
<h1>Fixed issue with track pieces becoming misaligned at certain angles</h1>
<p>For angle of 27 degrees before the change:</p>
<p><img src="/images/QmSUcue2ank4XotBdYvfQmkRrVJcrXbdzE7rLwBCxyoVh6" alt="image.png"></p>
<p>After:
<img src="/images/QmZgKCQSAa8jZuAwNDj4efa8nSpNNb6KL1fptZatvVg6zV" alt="image.png"></p>
<h3>How?</h3>
<p>To fix this, I had to think of the track piece as one section of a full circle
<img src="/images/QmbW8eRouaZVRH7VDEr7QMxqMr5arpTJ319kzBArik9L2h" alt="image.png"></p>
<p>Then, I can use SOH CAH TOA to know that the Cos of the angle B (in this case 90 - 27 as shown in the diagram above), is equal to the adjacent divided by the hypotenuse.</p>
<p>This means sinB = O/H, cosB = A/H, tanB = O/A (These are the lengths of the sides, Opposite and Adjacent of the angle, and the Hypotenuse).</p>
<p>The angle is determined from the total angle of this track piece, but then it has to be <code class="language-text">90 - that angle</code>, as shown in the image above. The known angle is angle A, and angle A is equal to <code class="language-text">90 - B</code>.</p>
<p>The hypotenuse side is the radius of the circle.</p>
<div class="gatsby-highlight" data-language="c#"><pre style="counter-reset: linenumber NaN" class="language-c# line-numbers"><code class="language-c#">//calculate the full angle this track piece gets to
float totalAngle = 90 - adjustmentAngle.y * 9f;

 //radius of the outside circle (SOH CAH TOA, cosA = a/h, h = a/cosA)
float radius1 = Mathf.Abs(sizes[i]) / Mathf.Cos(totalAngle * Mathf.Deg2Rad);</code><span aria-hidden="true" class="line-numbers-rows" style="white-space: normal; width: auto; left: 0;"><span></span><span></span><span></span><span></span><span></span></span></pre></div>
<p>Now, the proper radius is calculated instead of just assuming that the full height is the radius (as that would only work for a 90 degree turn).</p>
<h1>Real-time track adjustment</h1>
<p><img src="/images/QmUCVTC8ThpKmspCERk8mPaNQ2qBJwVB2nT2XBRfYkHxR8" alt="realtime-track-adjustment.gif"></p>
<p>This was <a href="https://github.com/ajayyy/VosterCoasterVR/pull/7/commits/2c5e172b54bc189f28f454a66ee1103069df509c">done</a> by creating a function to reset the track completely. This makes it so that you can modify it again.</p>
<p>This works, but is very inefficient, requiring the whole mesh to be reset every frame just to be adjusted again.</p>
<p>So, I <a href="https://github.com/ajayyy/VosterCoasterVR/pull/8/commits/f24d3b1e5be1c70bdfc86f22fa974c068fcf3f05">later</a> changed it again. Now, when adjusting the mesh of the track, it does not do any math relative to the positions (<code class="language-text">transform.localPosition *=</code>) but instead sets it to the default (<code class="language-text">transform.localPosition = defaultBonePosition * </code>).</p>
<p>This, along with setting the angle instead of adding to it, and saving the original size to attempt to scale all track pieces too removes the need to reset the track piece every frame when changing the angle.</p>
<h1>GitHub Account</h1>
<p><a href="https://github.com/ajayyy/">https://github.com/ajayyy/</a></p>
<h1>Pull Requests</h1>
<p><a href="https://github.com/ajayyy/VosterCoasterVR/pull/6">https://github.com/ajayyy/VosterCoasterVR/pull/6</a>
<a href="https://github.com/ajayyy/VosterCoasterVR/pull/7">https://github.com/ajayyy/VosterCoasterVR/pull/7</a>
<a href="https://github.com/ajayyy/VosterCoasterVR/pull/8">https://github.com/ajayyy/VosterCoasterVR/pull/8</a></p></div></div></div></main></div><div id="gatsby-announcer" style="position:absolute;top:0;width:1px;height:1px;padding:0;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border:0" aria-live="assertive" aria-atomic="true"></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/making-roller-coasters-or-real-time-track-edits-or-voster-coaster";window.___webpackCompilationHash="ee9f93a22f5d812d53ee";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"polyfill":["/polyfill-2027c615c2b1d449723b.js"],"app":["/app-a8a88917d557b5d5c239.js"],"component---src-pages-404-js":["/component---src-pages-404-js-6e293d823d5e173acc7a.js"],"component---src-pages-index-js":["/component---src-pages-index-js-4c00f30d3c318a368679.js"],"component---src-pages-sponsorblock-js":["/component---src-pages-sponsorblock-js-03e17db57ab08e6d8408.js"],"component---src-pages-vostercoaster-js":["/component---src-pages-vostercoaster-js-dee0d7b7fa6b58872b3e.js"],"component---src-templates-blog-template-js":["/component---src-templates-blog-template-js-d0d2c490581e9ed2d6f1.js"]};/*]]>*/</script><script src="/polyfill-2027c615c2b1d449723b.js" nomodule=""></script><script src="/app-a8a88917d557b5d5c239.js" async=""></script><script src="/framework-c0acfd4b44c09a0159f3.js" async=""></script><script src="/webpack-runtime-f415ec79cfe5feaa0178.js" async=""></script></body></html>