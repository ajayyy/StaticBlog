{"componentChunkName":"component---src-templates-blog-template-js","path":"/video-player-controls-and-visual-overhaul-or-youtube-sponsorblocker","result":{"data":{"markdownRemark":{"html":"<h4>Repository</h4>\n<p><a href=\"https://github.com/ajayyy/SponsorBlocker\">https://github.com/ajayyy/SponsorBlocker</a>\n<a href=\"https://github.com/ajayyy/SponsorBlockServer\">https://github.com/ajayyy/SponsorBlockServer</a></p>\n<p><img src=\"/images/37GSA0wm-image.png\" alt=\"image.png\"></p>\n<h1>Client</h1>\n<ul>\n<li>Changed the way it detects when a page is not YouTube and prevented lastError.</li>\n</ul>\n<p>Before, it attempted to communicate with the tab right when the popup was open. However, if the tab was not a youtube.com tab, it would not have the content script added to receive the communications. This was fixed by only sending a message when the popup knows the tab is ready.</p>\n<ul>\n<li>Made it not load the extension on the YouTube homepage and channel pages.</li>\n</ul>\n<p>These pages don't have videos that need sponsors removed.</p>\n<ul>\n<li>\n<p>Added nice buttons to the popup</p>\n</li>\n<li>\n<p>Made the sponsorships starts button update with the clear times button.</p>\n</li>\n</ul>\n<p>When you hit the \"Sponsorship Starts Now\" button, it transforms into \"Sponsorship Ends Now\", this should update whenever a change in what has been recorded has happened.</p>\n<ul>\n<li>Made the button's nice on the notice and added a notice about the timeout.</li>\n</ul>\n<p><img src=\"/images/qEfElyR4-image.png\" alt=\"image.png\"></p>\n<ul>\n<li>Made it generate and submit a userID defining this user.</li>\n</ul>\n<p>It uses a uuid generator and generates a uuid only if needed.</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-javascript line-numbers\"><code class=\"language-javascript\"><span class=\"token keyword\">function</span> <span class=\"token function\">getUserID</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">callback</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userID <span class=\"token operator\">!=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>userID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token comment\">//if it is not cached yet, grab it from storage</span>\n  chrome<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span>local<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">\"userID\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">function</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">result</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">let</span> userIDStorage <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span>userID<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>userIDStorage <span class=\"token operator\">!=</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      userID <span class=\"token operator\">=</span> userIDStorage<span class=\"token punctuation\">;</span>\n      <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>userID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token comment\">//generate a userID</span>\n      userID <span class=\"token operator\">=</span> <span class=\"token function\">generateUUID</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      \n      <span class=\"token comment\">//save this UUID</span>\n      chrome<span class=\"token punctuation\">.</span>storage<span class=\"token punctuation\">.</span>local<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token string-property property\">\"userID\"</span><span class=\"token operator\">:</span> userID<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n      <span class=\"token function\">callback</span><span class=\"token punctuation\">(</span>userID<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>\n<ul>\n<li>\n<p>Made time have a zero in front when it is less than 10 seconds.</p>\n</li>\n<li>\n<p>Made submit times not appear when no end time was specified.</p>\n</li>\n</ul>\n<p>This makes the \"Submit Sponsor Times\" button only be visible when something can be submitted to the database.</p>\n<ul>\n<li>Added button on YouTube player and new icons to support that</li>\n</ul>\n<p><img src=\"/images/5khiydEb-image.png\" alt=\"image.png\"></p>\n<p>By being a white icon, it does not stand out when in the player and looks normal.</p>\n<ul>\n<li>\n<p>Added option to hide the video player controls button in the popup.</p>\n</li>\n<li>\n<p>Made options a hidden section in the popup.</p>\n</li>\n</ul>\n<p><img src=\"/images/Rt9rjED1-hidden20options.gif\" alt=\"hidden options.gif\"></p>\n<h1>Server</h1>\n<ul>\n<li>\n<p>Added support for receiving a userID</p>\n</li>\n<li>\n<p>Made the server save a hash of their ip with the data.</p>\n</li>\n<li>\n<p>Added global salt for hashed ips</p>\n</li>\n<li>\n<p>Added duplication check.</p>\n</li>\n<li>\n<p>Made it save the time the data was submitted (in unix time)</p>\n</li>\n<li>\n<p>Made error codes returned by the sever intuitive</p>\n</li>\n</ul>\n<p>It now reports correct codes such as error code 429 for a ratelimit.</p>\n<ul>\n<li>Made it so that each user can only submit 4 sponsorship segments per video</li>\n</ul>\n<p>This should help prevent spammers and trolls.</p>\n<p><img src=\"/images/10O2qZxV-image.png\" alt=\"image.png\"></p>\n<h4>Pull Requests</h4>\n<p><a href=\"https://github.com/ajayyy/SponsorBlocker/pull/1\">https://github.com/ajayyy/SponsorBlocker/pull/1</a>\n<a href=\"https://github.com/ajayyy/SponsorBlockServer/pull/1\">https://github.com/ajayyy/SponsorBlockServer/pull/1</a></p>\n<h4>GitHub Account</h4>\n<p><a href=\"https://github.com/ajayyy\">https://github.com/ajayyy</a></p>","frontmatter":{"date":"July 13, 2019","path":"/video-player-controls-and-visual-overhaul-or-youtube-sponsorblocker","title":"Video Player Controls and Visual Overhaul | YouTube SponsorBlocker"}}},"pageContext":{}},"staticQueryHashes":[]}